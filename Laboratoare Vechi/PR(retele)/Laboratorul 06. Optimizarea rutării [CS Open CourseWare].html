<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0047)https://ocw.cs.pub.ro/courses/pr/laboratoare/06 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  
  <title>
    Laboratorul 06. Optimizarea rutării    [CS Open CourseWare]
  </title>

  <meta name="generator" content="DokuWiki">
<meta name="robots" content="index,follow">
<meta name="date" content="2017-01-17T10:55:15+0200">
<meta name="keywords" content="pr,laboratoare,06">
<link rel="search" type="application/opensearchdescription+xml" href="https://ocw.cs.pub.ro/courses/lib/exe/opensearch.php" title="CS Open CourseWare">
<link rel="start" href="https://ocw.cs.pub.ro/courses/">
<link rel="alternate" type="application/rss+xml" title="Recent Changes" href="https://ocw.cs.pub.ro/courses/feed.php">
<link rel="alternate" type="application/rss+xml" title="Current Namespace" href="https://ocw.cs.pub.ro/courses/feed.php?mode=list&amp;ns=pr:laboratoare">
<link rel="alternate" type="text/html" title="Plain HTML" href="https://ocw.cs.pub.ro/courses/_export/xhtml/pr/laboratoare/06">
<link rel="canonical" href="http://ocw.cs.pub.ro/courses/pr/laboratoare/06">
<link rel="stylesheet" type="text/css" href="./Laboratorul 06. Optimizarea rutării [CS Open CourseWare]_files/css.php">
<script type="text/javascript">/*<![CDATA[*/var NS='pr:laboratoare';var JSINFO = {"id":"pr:laboratoare:06","namespace":"pr:laboratoare","isadmin":0,"isauth":0};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="./Laboratorul 06. Optimizarea rutării [CS Open CourseWare]_files/js.php"></script>
<script type="text/x-mathjax-config;executed=true">/*<![CDATA[*/MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ["$","$"], ["\\(","\\)"] ],
        displayMath: [ ["$$","$$"], ["\\[","\\]"] ],
        processEscapes: true
    }
});
/*!]]>*/</script>
<script src="./Laboratorul 06. Optimizarea rutării [CS Open CourseWare]_files/MathJax.js.download" id=""></script>
<script type="text/javascript">/*<![CDATA[*/
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
		  
/*!]]>*/</script><script src="./Laboratorul 06. Optimizarea rutării [CS Open CourseWare]_files/ga.js.download" type="text/javascript"></script>
<script type="text/javascript">/*<![CDATA[*/
var pageTracker = _gat._getTracker("UA-38383934-1");
pageTracker._initData();
pageTracker._trackPageview();
		  
/*!]]>*/</script>

  <link rel="shortcut icon" href="https://ocw.cs.pub.ro/courses/lib/tpl/arctic/images/favicon.ico">

  
<style type="text/css">.MathJax_Hover_Frame {border-radius: .25em; -webkit-border-radius: .25em; -moz-border-radius: .25em; -khtml-border-radius: .25em; box-shadow: 0px 0px 15px #83A; -webkit-box-shadow: 0px 0px 15px #83A; -moz-box-shadow: 0px 0px 15px #83A; -khtml-box-shadow: 0px 0px 15px #83A; border: 1px solid #A6D ! important; display: inline-block; position: absolute}
.MathJax_Menu_Button .MathJax_Hover_Arrow {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 4px; -webkit-border-radius: 4px; -moz-border-radius: 4px; -khtml-border-radius: 4px; font-family: 'Courier New',Courier; font-size: 9px; color: #F0F0F0}
.MathJax_Menu_Button .MathJax_Hover_Arrow span {display: block; background-color: #AAA; border: 1px solid; border-radius: 3px; line-height: 0; padding: 4px}
.MathJax_Hover_Arrow:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_Hover_Arrow:hover span {background-color: #CCC!important}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_About.MathJax_MousePost {outline: none}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 2px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 2px 2em; background: transparent}
.MathJax_MenuArrow {position: absolute; right: .5em; padding-top: .25em; color: #666666; font-size: .75em}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuArrow.RTL {left: .5em; right: auto}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuCheck.RTL {right: .7em; left: auto}
.MathJax_MenuRadioCheck {position: absolute; left: 1em}
.MathJax_MenuRadioCheck.RTL {right: 1em; left: auto}
.MathJax_MenuLabel {padding: 2px 2em 4px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #CCCCCC; margin: 4px 1px 0px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: Highlight; color: HighlightText}
.MathJax_MenuDisabled:focus, .MathJax_MenuLabel:focus {background-color: #E8E8E8}
.MathJax_ContextMenu:focus {outline: none}
.MathJax_ContextMenu .MathJax_MenuItem:focus {outline: none}
#MathJax_AboutClose {top: .2em; right: .2em}
.MathJax_Menu .MathJax_MenuClose {top: -10px; left: -10px}
.MathJax_MenuClose {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; font-family: 'Courier New',Courier; font-size: 24px; color: #F0F0F0}
.MathJax_MenuClose span {display: block; background-color: #AAA; border: 1.5px solid; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; line-height: 0; padding: 8px 0 6px}
.MathJax_MenuClose:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_MenuClose:hover span {background-color: #CCC!important}
.MathJax_MenuClose:hover:focus {outline: none}
</style><style type="text/css">.MathJax_Preview .MJXf-math {color: inherit!important}
</style><style type="text/css">.MJX_Assistive_MathML {position: absolute!important; top: 0; left: 0; clip: rect(1px, 1px, 1px, 1px); padding: 1px 0 0 0!important; border: 0!important; height: 1px!important; width: 1px!important; overflow: hidden!important; display: block!important; -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none}
.MJX_Assistive_MathML.MJX_Assistive_MathML_Block {width: 100%!important}
</style><style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; -webkit-box-sizing: content-box; -moz-box-sizing: content-box; box-sizing: content-box; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
#MathJax_ZoomFrame {position: relative; display: inline-block; height: 0; width: 0}
#MathJax_ZoomEventTrap {position: absolute; left: 0; top: 0; z-index: 302; display: inline-block; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style><style type="text/css">.MathJax_Preview {color: #888}
#MathJax_Message {position: fixed; left: 1em; bottom: 1.5em; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style><style type="text/css">.MJXp-script {font-size: .8em}
.MJXp-right {-webkit-transform-origin: right; -moz-transform-origin: right; -ms-transform-origin: right; -o-transform-origin: right; transform-origin: right}
.MJXp-bold {font-weight: bold}
.MJXp-italic {font-style: italic}
.MJXp-scr {font-family: MathJax_Script,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-frak {font-family: MathJax_Fraktur,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-sf {font-family: MathJax_SansSerif,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-cal {font-family: MathJax_Caligraphic,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-mono {font-family: MathJax_Typewriter,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-largeop {font-size: 150%}
.MJXp-largeop.MJXp-int {vertical-align: -.2em}
.MJXp-math {display: inline-block; line-height: 1.2; text-indent: 0; font-family: 'Times New Roman',Times,STIXGeneral,serif; white-space: nowrap; border-collapse: collapse}
.MJXp-display {display: block; text-align: center; margin: 1em 0}
.MJXp-math span {display: inline-block}
.MJXp-box {display: block!important; text-align: center}
.MJXp-box:after {content: " "}
.MJXp-rule {display: block!important; margin-top: .1em}
.MJXp-char {display: block!important}
.MJXp-mo {margin: 0 .15em}
.MJXp-mfrac {margin: 0 .125em; vertical-align: .25em}
.MJXp-denom {display: inline-table!important; width: 100%}
.MJXp-denom > * {display: table-row!important}
.MJXp-surd {vertical-align: top}
.MJXp-surd > * {display: block!important}
.MJXp-script-box > *  {display: table!important; height: 50%}
.MJXp-script-box > * > * {display: table-cell!important; vertical-align: top}
.MJXp-script-box > *:last-child > * {vertical-align: bottom}
.MJXp-script-box > * > * > * {display: block!important}
.MJXp-mphantom {visibility: hidden}
.MJXp-munderover {display: inline-table!important}
.MJXp-over {display: inline-block!important; text-align: center}
.MJXp-over > * {display: block!important}
.MJXp-munderover > * {display: table-row!important}
.MJXp-mtable {vertical-align: .25em; margin: 0 .125em}
.MJXp-mtable > * {display: inline-table!important; vertical-align: middle}
.MJXp-mtr {display: table-row!important}
.MJXp-mtd {display: table-cell!important; text-align: center; padding: .5em 0 0 .5em}
.MJXp-mtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-mlabeledtr {display: table-row!important}
.MJXp-mlabeledtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mlabeledtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MJXp-scale0 {-webkit-transform: scaleX(.0); -moz-transform: scaleX(.0); -ms-transform: scaleX(.0); -o-transform: scaleX(.0); transform: scaleX(.0)}
.MJXp-scale1 {-webkit-transform: scaleX(.1); -moz-transform: scaleX(.1); -ms-transform: scaleX(.1); -o-transform: scaleX(.1); transform: scaleX(.1)}
.MJXp-scale2 {-webkit-transform: scaleX(.2); -moz-transform: scaleX(.2); -ms-transform: scaleX(.2); -o-transform: scaleX(.2); transform: scaleX(.2)}
.MJXp-scale3 {-webkit-transform: scaleX(.3); -moz-transform: scaleX(.3); -ms-transform: scaleX(.3); -o-transform: scaleX(.3); transform: scaleX(.3)}
.MJXp-scale4 {-webkit-transform: scaleX(.4); -moz-transform: scaleX(.4); -ms-transform: scaleX(.4); -o-transform: scaleX(.4); transform: scaleX(.4)}
.MJXp-scale5 {-webkit-transform: scaleX(.5); -moz-transform: scaleX(.5); -ms-transform: scaleX(.5); -o-transform: scaleX(.5); transform: scaleX(.5)}
.MJXp-scale6 {-webkit-transform: scaleX(.6); -moz-transform: scaleX(.6); -ms-transform: scaleX(.6); -o-transform: scaleX(.6); transform: scaleX(.6)}
.MJXp-scale7 {-webkit-transform: scaleX(.7); -moz-transform: scaleX(.7); -ms-transform: scaleX(.7); -o-transform: scaleX(.7); transform: scaleX(.7)}
.MJXp-scale8 {-webkit-transform: scaleX(.8); -moz-transform: scaleX(.8); -ms-transform: scaleX(.8); -o-transform: scaleX(.8); transform: scaleX(.8)}
.MJXp-scale9 {-webkit-transform: scaleX(.9); -moz-transform: scaleX(.9); -ms-transform: scaleX(.9); -o-transform: scaleX(.9); transform: scaleX(.9)}
.MathJax_PHTML .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
</style></head>
<body><div id="MathJax_Message" style="display: none;"></div>
<div id="wrapper" class="show">
  <div class="dokuwiki">

    
    <div class="stylehead">
      <div class="header">
        <div class="pagename">
          <a href="https://ocw.cs.pub.ro/courses/pr/"><img height="70" src="./Laboratorul 06. Optimizarea rutării [CS Open CourseWare]_files/sigla_pr.png"> </a>        </div>
        <div class="logo">
          <a style="color: #AAA !important;" href="https://ocw.cs.pub.ro/courses/systems/"><img height="70" src="./Laboratorul 06. Optimizarea rutării [CS Open CourseWare]_files/systems.png" name="dokuwiki__top"></a>        </div>
      </div>
    
       
      <div class="breadcrumbs">
              </div>
      
            </div>

                  <div class="bar" id="bar__top">
        <div class="bar-left">
                  </div>
        <div class="bar-right">
          <a href="https://ocw.cs.pub.ro/courses/pr/laboratoare/06?do=recent" class="action recent" accesskey="r" rel="nofollow" title="Recent changes [R]">Recent changes</a><a href="https://ocw.cs.pub.ro/courses/pr/laboratoare/06?do=login&amp;sectok=77fa91c0e6469dfa554c55cda88b5142" class="action login" rel="nofollow" title="Login">Login</a>        </div>
    </div>
        
    
    
    
              <div class="left_page">
          
<h2 class="sectionedit1" id="laboratorul_06_optimizarea_rutarii">Laboratorul 06. Optimizarea rutării</h2>
<div class="level2">

</div>

<h3 class="sectionedit2" id="motivatie">Motivație</h3>
<div class="level3">

<p>
Pentru o mai bună poziţie în piaţă, cele 3 companii Microsoft, Google şi Facebook au fuzionat în concernul „May the force be with you”. Odată cu această decizie politică, şi reţeaua trebuie unificată pentru a putea furniza servicii integrate.
Deşi cea mai simplă soluţie ar fi folosirea unui singur protocol de rutare link-state în toată reţeaua, unificarea acesteia este o operaţie de maximă importanţă pentru management şi de aceea termenul limită este foarte strict. S-a tras astfel concluzia că soluţia temporară de redistribuire a protocoalelor de rutare oferă o reţea stabilă într-un timp scurt de implementare.
Urmărind cerinţele de mai jos va trebui să asiguraţi conectivitatea între oricare două puncte ale reţelei. Toate adresele IP sunt deja configurate pe echipamente conform topologiei globale, precum şi protocoalele de rutare corespunzătoare.
</p>

</div>

<h3 class="sectionedit3" id="topologie">Topologie</h3>
<div class="level3">

<p>
<a href="https://ocw.cs.pub.ro/courses/_detail/pr/laboratoare/10_topologie.png?id=pr%3Alaboratoare%3A06" class="media" title="pr:laboratoare:10_topologie.png"><img src="./Laboratorul 06. Optimizarea rutării [CS Open CourseWare]_files/10_topologie.png" class="media" alt=""></a>
</p>

</div>

<h3 class="sectionedit4" id="cerinte">Cerinţe</h3>
<div class="level3">

</div>

<h4 id="setup">Setup</h4>
<div class="level4">

<p>
</p><p></p><div class="noteimportant"> Descărcați configurațiile inițiale de <a href="https://ocw.cs.pub.ro/courses/_media/pr/laboratoare/06_initial_configs.zip" class="media mediafile mf_zip" title="pr:laboratoare:06_initial_configs.zip (3.9 KB)">aici</a>. 
</div><p></p>
<p></p>

</div>

<h4 id="exercitii">Exerciții</h4>
<div class="level4">

<p>
</p><p></p><div class="noteclassic">
Toate configurațiile au fost încărcate pe rutere. Nu începeți taskurile acestui laborator fără să încărcați initial_configs.

</div><p></p>
<p></p>

<p>
</p><p></p><div class="noteimportant">
Atenție! de fiecare dată când în laborator vi se cere la un task să salvați configurațiile ruterelor în initial_configs trebuie să:
<p></p>
<ul>
<li class="level1"><div class="li"> Dați comanda „wr” pe toate ruterele</div>
</li>
<li class="level1"><div class="li"> În console dynagen dați comanda</div>
</li>
</ul>
<pre class="code">export /all initial_configs</pre>

<p>

</p></div><p></p>
<p></p>

<p>
<strong> 1. </strong> [20p] Pikachu este ruterul ce delimitează compania Microsoft de Core. Realizaţi redistribuţia în ambele sensuri între protocolul RIP v2 şi OSPF area 0, urmărind cerinţele specificate mai jos:
</p>
<ul>
<li class="level1"><div class="li"> Înainte de a începe task-urile, analizaţi tabelele de rutare ale ruterelor Pikachu, Eevee și Mew. Verificaţi ce au învăţat prin protocoalele de rutare.</div>
</li>
<li class="level1"><div class="li"> La procesul de redistribuţie în OSPF al RIP, filtraţi toate rutele /30 din spatele Mew din domeniul RIP, astfel încât acestea să nu fie redistribuite şi în OSPF. Verificaţi. </div>
</li>
<li class="level1"><div class="li"> Configuraţi redistribuția din RIP în OSPF astfel încât orice rută provenită din RIP să fie introdusă în protocol cu o metrică/cost de 44.</div>
</li>
<li class="level1"><div class="li"> Configuraţi comportamentul implicit RIP astfel încât orice rută redistribuită în acest protocol să fie introdusă în protocol cu o metrică de 6 hopuri. Redistribuiți toate rutele învățate prin OSPF în RIP.</div>
</li>
<li class="level1"><div class="li"> Verificaţi redistribuţia folosind comenzi show. Cum apar rutele în fiecare dintre protocoalele de rutare, şi de ce ?</div>
</li>
</ul>
<div class="solution"><div class="solution_title hidden_solution_title"><img src="./Laboratorul 06. Optimizarea rutării [CS Open CourseWare]_files/tool-source.png"><span class="title_text">Afișează rezolvarea</span></div><div class="hide_text">Ascunde rezolvarea</div><div class="show_text">Afișează rezolvarea</div><div class="solution_contents hidden_solution_contents" style="display: none;"><pre class="code">Pikachu(config)#ip access-list standard rip_to_ospf
Pikachu(config-std-nacl)#deny 10.0.0.4 0.0.0.3
Pikachu(config-std-nacl)#deny 10.0.0.8 0.0.0.3
Pikachu(config-std-nacl)#deny 192.168.0.192 0.0.0.3
Pikachu(config-std-nacl)#permit any
Pikachu(config)#route-map rip_to_ospf permit 10
Pikachu(config-route-map)#match ip address rip_to_ospf
Pikachu(config)#router ospf 2
Pikachu(config-router)#redistribute rip route-map rip_to_ospf subnets metric 44
Pikachu(config)#router rip
Pikachu(config-router)#redistribute ospf 2 metric 6
Pikachu(config-router)#default-metric 6</pre>

<p>
•	Pentru masca exacta in RIP trebuie dată comanda no auto-summary pe instanțele de RIPv2.
Caterpie#sh ip ospf databas external
</p>
<pre class="code">[..]

  Routing Bit Set on this LSA
  LS age: 518
  Options: (No TOS-capability, DC)
  LS Type: AS External Link
  Link State ID: 10.0.0.0 (External Network Number )
  Advertising Router: 172.14.31.2
  LS Seq Number: 80000001
  Checksum: 0xDBC9
  Length: 36
  Network Mask: /30
        Metric Type: 2 (Larger than any link state path)
        TOS: 0
        Metric: 44
        Forward Address: 0.0.0.0
        External Route Tag: 0
        </pre>
</div></div>

<p>
<strong> 2. </strong> [15p] Caterpie este ruterul ce delimitează compania Google de Core. Realizaţi redistribuţia în ambele sensuri între cele două protocoale urmărind cerinţele specificate mai jos:
</p>
<ul>
<li class="level1"><div class="li"> Introduceți rutele OSPF area 0 în EIGRP astfel încât toate rutele OSPF să fie introduse cu următoarea metrică: 10000, 100, 255, 1, 1500</div>
</li>
<li class="level1"><div class="li"> Introduceți rutele EIGRP în OSPF, astfel încât toate rutele EIGRP să fie introduse cu metrica 67.</div>
</li>
<li class="level1"><div class="li"> Verificați cele două redistribuții.</div>
</li>
</ul>
<div class="solution"><div class="solution_title hidden_solution_title"><img src="./Laboratorul 06. Optimizarea rutării [CS Open CourseWare]_files/tool-source.png"><span class="title_text">Afișează rezolvarea</span></div><div class="hide_text">Ascunde rezolvarea</div><div class="show_text">Afișează rezolvarea</div><div class="solution_contents hidden_solution_contents" style="display: none;"><pre class="code">Caterpie(config)#router eigrp 100
Caterpie(config-router)#redistribute ospf 2 metric 10000 100 255 1 1500
Caterpie(config-router)#router ospf 2
Caterpie(config-router)#redistribute eigrp 100 subnets metric 67
Caterpie#sh ip eigrp topolo 192.168.0.128
% IP-EIGRP (AS 100): Route not in topology table
Caterpie#sh ip eigrp topolo 192.168.0.128/26
IP-EIGRP (AS 100): Topology entry for 192.168.0.128/26
  State is Passive, Query origin flag is 1, 1 Successor(s), FD is 281600
  Routing Descriptor Blocks:
  172.2.0.1, from Redistributed, Send flag is 0x0
      Composite metric is (281600/0), Route is External
      Vector metric:
        Minimum bandwidth is 10000 Kbit
        Total delay is 1000 microseconds
        Reliability is 255/255
        Load is 1/255
        Minimum MTU is 1500
        Hop count is 0
      External data:
        Originating router is 172.2.0.2 (this system)
        AS number of route is 2
        External protocol is OSPF, external metric is 44
        Administrator tag is 0 (0x00000000)

Caterpie#sh ip ospf databas external
[..]
  LS age: 272
  Options: (No TOS-capability, DC)
  LS Type: AS External Link
  Link State ID: 199.4.0.192 (External Network Number )
  Advertising Router: 172.2.0.2
  LS Seq Number: 80000001
  Checksum: 0x393A
  Length: 36
  Network Mask: /26
        Metric Type: 2 (Larger than any link state path)
        TOS: 0
        Metric: 67
        Forward Address: 0.0.0.0
        External Route Tag: 0
[..]</pre>
</div></div>

<p>
<strong> 3. </strong> [20p] Filtraţi toate rutele /30 din spatele ruterului Dugtrio la intrare în ruterul Caterpie folosind un distribute-list.
</p>
<ul>
<li class="level1"><div class="li"> Verificați tabela de rutare a ruterelor Caterpie si Eevee.</div>
</li>
</ul>
<div class="solution"><div class="solution_title hidden_solution_title"><img src="./Laboratorul 06. Optimizarea rutării [CS Open CourseWare]_files/tool-source.png"><span class="title_text">Afișează rezolvarea</span></div><div class="hide_text">Ascunde rezolvarea</div><div class="show_text">Afișează rezolvarea</div><div class="solution_contents hidden_solution_contents" style="display: none;"><pre class="code">Caterpie(config)#ip access-list standard eigrp_deny/30
Caterpie(config-std-nacl)#deny 10.10.10.4 0.0.0.3
Caterpie(config-std-nacl)#deny 10.10.10.28 0.0.0.3
Caterpie(config-std-nacl)#deny 10.10.10.192 0.0.0.3
Caterpie(config-std-nacl)#permit any
Caterpie(config-std-nacl)#exit
Caterpie(config)#router eigrp 100
Caterpie(config-router)#distribute-list eigrp_deny/30 in e3/1
Caterpie#sh ip route
[..]
     10.0.0.0/30 is subnetted, 2 subnets
C       10.10.10.0 is directly connected, Ethernet3/1
O E2    10.0.0.0 [110/44] via 172.2.0.1, 00:11:47, Ethernet2/0
     199.4.0.0/26 is subnetted, 3 subnets
[..]	
Eevee#sh ip route
[..]
     10.0.0.0/8 is variably subnetted, 5 subnets, 2 masks
O E2    10.10.10.0/30 [110/67] via 172.2.0.2, 00:13:39, Ethernet2/0
O E2    10.0.0.0/30 [110/44] via 172.14.31.2, 00:13:39, FastEthernet3/0
O       10.10.211.168/30 [110/11] via 172.1.231.2, 00:33:55, Ethernet2/1
O       10.10.211.0/29 [110/11] via 172.1.231.2, 00:33:55, Ethernet2/1
O       10.10.211.8/30 [110/11] via 172.1.231.2, 00:33:55, Ethernet2/1
     199.4.0.0/26 is subnetted, 3 subnets
[..]</pre>
</div></div>

<p>
<strong> 4. </strong> [25p] Eevee este ruterul ce delimitează compania Facebook de Core. Realizați redistribuţia în ambele sensuri între cele două protocoale urmărind cerinţele specificate mai jos:
</p>
<ul>
<li class="level1"><div class="li"> Configurați ruterul Eevee astfel încât toate rutele OSPF proces 2 area 0 să fie introduse cu metrică cumulativă cu valoare de intrare 25 in OSPF proces 1 area 0.</div>
</li>
<li class="level1"><div class="li"> Introduceți rutele OSPF proces 1 area 0 în OSPF proces 2 area 0 astfel încât toate rutele OSPF proces 1 să fie introduse cu metrica 73, DAR la procesul de redistributie filtraţi rutele /30 şi /29 din domeniul OSPF proces 1 area 0.</div>
</li>
</ul>
<div class="solution"><div class="solution_title hidden_solution_title"><img src="./Laboratorul 06. Optimizarea rutării [CS Open CourseWare]_files/tool-source.png"><span class="title_text">Afișează rezolvarea</span></div><div class="hide_text">Ascunde rezolvarea</div><div class="show_text">Afișează rezolvarea</div><div class="solution_contents hidden_solution_contents" style="display: none;"><pre class="code">Eevee(config-router)#router ospf 1
Eevee(config-router)#redistribute ospf 2 subnets metric-type 1 metric 25
Eevee(config)#ip access-list standard ospf1_in_ospf2
Eevee(config-std-nacl)#deny 172.1.0.0 0.0.0.3
Eevee(config-std-nacl)#deny 10.10.211.168 0.0.0.3
Eevee(config-std-nacl)#deny 10.10.211.0 0.0.0.7
Eevee(config-std-nacl)#deny 10.10.211.8 0.0.0.3
Eevee(config-std-nacl)#permit any
Eevee(config-std-nacl)#exit
Eevee(config)#route-map ospf1_in_ospf2 permit 10
Eevee(config-route-map)#match ip address ospf1_in_ospf2
Eevee(config)#router ospf 2
Eevee(config-router)#redistribute ospf 1 route-map ospf1_in_ospf2 metric 73 subnets</pre>
</div></div>

<p>
<strong> 5. </strong> [5p] Până în acest punct al laboratorului ar trebui sa aveți conectivitate end-to-end. Verificați acest lucru folosind comanda ping sau sh ip route.
</p>

<p>
<strong> 6. </strong> [25p] PBR : În rețeaua din domeniul EIGRP se află un server de resurse cu IP-ul 199.4.0.129. Acest server partajează foarte multe resurse cu domeniul RIP și din acest motiv link-ul dintre Pikachu și Eevee este supraîncărcat.
</p>
<ul>
<li class="level1"><div class="li"> Verificati printr-un traceroute pe unde ajung pachetele din domeniul RIP catre server.</div>
</li>
<li class="level1"><div class="li"> [10p] Configurați DOAR ruterele din domeniul RIP astfel încât orice trafic inițiat din acest domeniu cu destinația 199.4.0.129, să fie rutat de la Pikachu direct catre Caterpie. Restul traficului inițiat din domeniul RIP spre domeniul EIGRP trebuie în continuare să folosească link-ul dintre Pikachu și Eevee. Verificați că ați configurat corect.</div>
</li>
<li class="level1"><div class="li"> [15p] Configurați DOAR ruterele din domeniul EIGRP astfel încât traficul de la serverul mai sus menționat (199.4.0.129) ce are ca destinație domeniul RIP să fie rutat de la Caterpie direct pe link-ul către Pikachu. Restul traficului inițiat din domeniul EIGRP trebuie în continuare să folosească link-ul dintre Caterpie și Eevee.</div>
</li>
</ul>
<div class="solution"><div class="solution_title hidden_solution_title"><img src="./Laboratorul 06. Optimizarea rutării [CS Open CourseWare]_files/tool-source.png"><span class="title_text">Afișează rezolvarea</span></div><div class="hide_text">Ascunde rezolvarea</div><div class="show_text">Afișează rezolvarea</div><div class="solution_contents hidden_solution_contents" style="display: none;"><pre class="code">Pikachu(config)#ip access-list extended catreServer
Pikachu(config-ext-nacl)#permit ip any host 199.4.0.129
Pikachu(config)#route-map catreServer permit 10
Pikachu(config-route-map)#match ip add catreServer
Pikachu(config-route-map)#set ip next-hop 11.11.11.1
Pikachu(config)#interface fa1/0
Pikachu(config-if)#ip policy route-map catreServer
Caterpie(config)#ip access-list ext ServerRIP
Caterpie(config-ext-nacl)#permit ip host 199.4.0.129 10.0.0.0 0.0.0.3
Caterpie(config-ext-nacl)#permit ip host 199.4.0.129 10.0.0.4 0.0.0.3
Caterpie(config-ext-nacl)#permit ip host 199.4.0.129 10.0.0.8 0.0.0.3
Caterpie(config-ext-nacl)#permit ip host 199.4.0.129 200.0.0.0 0.0.0.255
Caterpie(config-ext-nacl)#permit ip host 199.4.0.129 200.0.1.0 0.0.0.255
Caterpie(config-ext-nacl)#permit ip host 199.4.0.129 141.85.99.0 0.0.0.255
Caterpie(config-ext-nacl)#permit ip host 199.4.0.129 141.85.147.128 0.0.0.127
Caterpie(config-ext-nacl)#permit ip host 199.4.0.129 192.168.0.0 0.0.0.127
Caterpie(config-ext-nacl)#permit ip host 199.4.0.129 192.168.0.192 0.0.0.3
Caterpie(config-ext-nacl)#permit ip host 199.4.0.129 192.168.0.128 0.0.0.191
Caterpie(config)#route-map ServerRIP permit 10
Caterpie(config-route-map)#match ip add ServerRIP
Caterpie(config-route-map)#set ip next-hop 11.11.11.2
Caterpie(config)#int e3/1
Caterpie(config-if)#ip policy route-map ServerRIP</pre>
</div></div>

</div>

        </div>
        <div class="right_sidebar">
          <form action="https://ocw.cs.pub.ro/courses/start" accept-charset="utf-8" class="search" id="dw__search" method="get"><div class="no"><input type="hidden" name="do" value="search"><input type="text" id="qsearch__in" accesskey="f" name="id" class="edit" title="[F]"><input type="submit" value="Search" class="button" title="Search"><div id="qsearch__out" class="ajax_qsearch JSpopup"></div></div></form>          <div class="namespace_sidebar sidebar_box">

<h1 class="sectionedit1" id="laboratoare">Laboratoare</h1>
<div class="level1">

<div><div id="nojs_indexmenu_58692033359c2012988670" data-jsajax="" class="indexmenu_nojs">

<ul class="idx">
<li class="level1"><div class="li"><a href="https://ocw.cs.pub.ro/courses/pr/laboratoare/01" class="wikilink1" title="pr:laboratoare:01">Laboratorul 01. Introducere</a></div></li>
<li class="level1"><div class="li"><a href="https://ocw.cs.pub.ro/courses/pr/laboratoare/02" class="wikilink1" title="pr:laboratoare:02">Laboratorul 02. IPv6</a></div></li>
<li class="level1"><div class="li"><a href="https://ocw.cs.pub.ro/courses/pr/laboratoare/03" class="wikilink1" title="pr:laboratoare:03">Laboratorul 03. OSPF</a></div></li>
<li class="level1"><div class="li"><a href="https://ocw.cs.pub.ro/courses/pr/laboratoare/04" class="wikilink1" title="pr:laboratoare:04">Laboratorul 04. OSPF (2)</a></div></li>
<li class="level1"><div class="li"><a href="https://ocw.cs.pub.ro/courses/pr/laboratoare/05" class="wikilink1" title="pr:laboratoare:05">Laboratorul 05. ACL-uri</a></div></li>
<li class="level1"><div class="li"><span class="curid"><a href="https://ocw.cs.pub.ro/courses/pr/laboratoare/06" class="wikilink1" title="pr:laboratoare:06">Laboratorul 06. Optimizarea rutării</a></span></div></li>
<li class="level1"><div class="li"><a href="https://ocw.cs.pub.ro/courses/pr/laboratoare/07" class="wikilink1" title="pr:laboratoare:07">Laboratorul 07. BGP (1)</a></div></li>
<li class="level1"><div class="li"><a href="https://ocw.cs.pub.ro/courses/pr/laboratoare/08" class="wikilink1" title="pr:laboratoare:08">Laboratorul 08. BGP (2)</a></div></li>
<li class="level1"><div class="li"><a href="https://ocw.cs.pub.ro/courses/pr/laboratoare/09" class="wikilink1" title="pr:laboratoare:09">Laboratorul 09. GRE și IPsec</a></div></li>
<li class="level1"><div class="li"><a href="https://ocw.cs.pub.ro/courses/pr/laboratoare/10" class="wikilink1" title="pr:laboratoare:10">Laboratorul 10. Recapitulare</a></div></li>
</ul>
</div></div>

</div>
<!-- EDIT1 SECTION "Laboratoare" [1-59] -->
<h1 class="sectionedit2" id="resurse">Resurse</h1>
<div class="level1">

</div>
<!-- EDIT2 SECTION "Resurse" [60-] -->
</div>
<div class="toc_sidebar sidebar_box">
<!-- TOC START -->
<div id="sb__right__dw__toc">
<h3 class="toggle">Table of Contents</h3>
<div>

<ul class="toc">
<li class="level2"><div class="li"><a href="https://ocw.cs.pub.ro/courses/pr/laboratoare/06#laboratorul_06_optimizarea_rutarii">Laboratorul 06. Optimizarea rutării</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="https://ocw.cs.pub.ro/courses/pr/laboratoare/06#motivatie">Motivație</a></div></li>
<li class="level3"><div class="li"><a href="https://ocw.cs.pub.ro/courses/pr/laboratoare/06#topologie">Topologie</a></div></li>
<li class="level3"><div class="li"><a href="https://ocw.cs.pub.ro/courses/pr/laboratoare/06#cerinte">Cerinţe</a></div>
<ul class="toc">
<li class="level4"><div class="li"><a href="https://ocw.cs.pub.ro/courses/pr/laboratoare/06#setup">Setup</a></div></li>
<li class="level4"><div class="li"><a href="https://ocw.cs.pub.ro/courses/pr/laboratoare/06#exercitii">Exerciții</a></div></li>
</ul></li>
</ul></li>
</ul>
</div>
</div>
<!-- TOC END -->
</div>
        </div>
      
    
      <div class="stylefoot">
        <div class="meta">
          <div class="user">
                    </div>
          <div class="doc">
          pr/laboratoare/06.txt · Last modified: 2017/01/17 10:55 by sergiu.costea          </div>
        </div>
      </div>

    <div class="clearer"></div>

    
                <div class="bar" id="bar__bottom">
      <div class="bar-left">
        <a href="https://ocw.cs.pub.ro/courses/pr/laboratoare/06?do=revisions" class="action revs" accesskey="o" rel="nofollow" title="Old revisions [O]">Old revisions</a>      </div>
      <div class="bar-right">
        <a href="https://ocw.cs.pub.ro/courses/pr/laboratoare/06?do=media&amp;ns=pr%3Alaboratoare" class="action media" rel="nofollow" title="Media Manager">Media Manager</a><a href="https://ocw.cs.pub.ro/courses/pr/laboratoare/06#dokuwiki__top" class="action top" accesskey="t" rel="nofollow" title="Back to top [T]">Back to top</a>      </div>
    </div>
    <div class="clearer"></div>
            
    <div align="center" class="footerinc">
  <div class="license"><a href="http://creativecommons.org/licenses/by-sa/3.0/" rel="license"><img src="./Laboratorul 06. Optimizarea rutării [CS Open CourseWare]_files/cc-by-sa.png" alt="CC Attribution-Share Alike 3.0 Unported"></a></div>
  <a target="_blank" href="http://www.chimeric.de/" title="www.chimeric.de"><img src="./Laboratorul 06. Optimizarea rutării [CS Open CourseWare]_files/button-chimeric-de.png" width="80" height="15" alt="www.chimeric.de" border="0"></a>

  <a target="_blank" href="http://jigsaw.w3.org/css-validator/check/referer" title="Valid CSS"><img src="./Laboratorul 06. Optimizarea rutării [CS Open CourseWare]_files/button-css.png" width="80" height="15" alt="Valid CSS" border="0"></a>

  <a target="_blank" href="http://wiki.splitbrain.org/wiki:dokuwiki" title="Driven by DokuWiki"><img src="./Laboratorul 06. Optimizarea rutării [CS Open CourseWare]_files/button-dw.png" width="80" height="15" alt="Driven by DokuWiki" border="0"></a>

  <a target="_blank" href="http://www.firefox-browser.de/" title="do yourself a favour and use a real browser - get firefox"><img src="./Laboratorul 06. Optimizarea rutării [CS Open CourseWare]_files/button-firefox.png" width="80" height="15" alt="do yourself a favour and use a real browser - get firefox!!" border="0"></a>
  
  <a target="_blank" href="https://ocw.cs.pub.ro/courses/feed.php" title="Recent changes RSS feed"><img src="./Laboratorul 06. Optimizarea rutării [CS Open CourseWare]_files/button-rss.png" width="80" height="15" alt="Recent changes RSS feed" border="0"></a>

  <a target="_blank" href="http://validator.w3.org/check/referer" title="Valid XHTML 1.0"><img src="./Laboratorul 06. Optimizarea rutării [CS Open CourseWare]_files/button-xhtml.png" width="80" height="15" alt="Valid XHTML 1.0" border="0"></a>
</div>

  </div>
</div>

<div class="no"><img src="./Laboratorul 06. Optimizarea rutării [CS Open CourseWare]_files/indexer.php" width="2" height="1" alt=""></div>


</body></html>